<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function can be used to produce composite metrics of change
(indicators), whilst propagating uncertainty in the individual
species trend estimates through to the final composite trend
metric. This function takes in a dataframe of sampled annual
occupancy estimates across multiple species and returns a
a single composite trend metric with uncertainty. This approach
is only suitable for species without missing years."><title>CompositeTrend function — CompositeTrend • BRCindicators</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="CompositeTrend function — CompositeTrend"><meta property="og:description" content="This function can be used to produce composite metrics of change
(indicators), whilst propagating uncertainty in the individual
species trend estimates through to the final composite trend
metric. This function takes in a dataframe of sampled annual
occupancy estimates across multiple species and returns a
a single composite trend metric with uncertainty. This approach
is only suitable for species without missing years."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">BRCindicators</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.7</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/vignette.html">BRCindicators</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/BiologicalRecordsCentre/BRCindicators/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>CompositeTrend function</h1>
      <small class="dont-index">Source: <a href="https://github.com/BiologicalRecordsCentre/BRCindicators/blob/HEAD/R/CompositeTrend.r" class="external-link"><code>R/CompositeTrend.r</code></a></small>
      <div class="d-none name"><code>CompositeTrend.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function can be used to produce composite metrics of change
(indicators), whilst propagating uncertainty in the individual
species trend estimates through to the final composite trend
metric. This function takes in a dataframe of sampled annual
occupancy estimates across multiple species and returns a
a single composite trend metric with uncertainty. This approach
is only suitable for species without missing years.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">CompositeTrend</span><span class="op">(</span></span>
<span>  <span class="va">indata</span>,</span>
<span>  <span class="va">output_path</span>,</span>
<span>  trend_choice <span class="op">=</span> <span class="st">"arithmetic_logit_occ"</span>,</span>
<span>  <span class="va">group_name</span>,</span>
<span>  save_iterations <span class="op">=</span> <span class="st">"yes"</span>,</span>
<span>  TrendScale <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  plot_output <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>indata</dt>
<dd><p>The file path to an csv file containing a dataframe
which contains year columns (prefixed with "X", e.g "X1985"), a species
column ("spp"), and an iteration identifier ("iter"). The
year columns contain the annual occupancy estimates for
the species-year-iteration combination in question.</p></dd>


<dt>output_path</dt>
<dd><p>The location where the outputs should be saved.</p></dd>


<dt>trend_choice</dt>
<dd><p>The approach used to combine the individual species
estimates into a single composite trend. See details.</p></dd>


<dt>group_name</dt>
<dd><p>The name of the species group we are running, used for
naming output files.</p></dd>


<dt>save_iterations</dt>
<dd><p>Do we want to save the composite trend estimates
for each individual iteration, these are generally used for
estimating temporal trends with uncertainty.</p></dd>


<dt>TrendScale</dt>
<dd><p>Traditionally some indicators are scaled so the first
year is set to a given number, 100 in the case of the UK
biodiversity indicators. This value can be chosen here, with no
scaling as the default.</p></dd>


<dt>plot_output</dt>
<dd><p>plot the resulting composite indicator: TRUE or FALSE.</p><ul><li><p><code>"arithmetic_logit_occ"</code> - The raw occupancy values are
 converted to the log odds scale (using the logit function). The
 arithmetic mean across species is used to create a composite trend for each
 iteration. These means are then converted back to the odds scale (exp)</p></li>
<li><p><code>"geometric_raw_occ"</code> - Take the geometric mean across species
 raw occupancy estimates</p></li>
<li><p><code>"arithmetic_raw_occ"</code> - potentially drop this, as not used.</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A summary file. This .csv is saved in the output_path location and
		   contains the annual composite indicator estimate (summarized across
		   the iterations as wither the mean or median). The unique number of
		   species contributing to the indicator is shown in the "spp_num" column.
		   Various forms of uncertainty (estimated across the iterations) for the
		   annual composite trend are presented, including the upper and lower
		   95<!-- % credible intervals, SD of the mean and standard error of the mean. --></p>


    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dylan Carbone, Tom August, Gary Powney, Charlie Outhwaite, Jack Hatfield, Mark Logie, Stephen Freeman, Nick Isaac.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

